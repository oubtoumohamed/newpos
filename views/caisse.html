
<div class="container-xl pt-3 pe-5 ps-5 pb-3">
    <!-- Page title -->
    <div class="page-header d-print-none">
        <div class="row align-items-center">
          <div class="col">
            <div class="d-flex">
                <div class="ms-0">
                    <h2 class="page-title"> Journal de Caisse </h2>
                    <!-- Page pre-title -->
                    <div class="page-pretitle">Les commandes ont un d√©lai de paiement</div>
                </div>
            </div>
          </div>
          <!-- Page title actions -->
          <div class="col-auto ms-auto d-print-none">
            <div class="btn-list">
                <div class="d-flex">
                    <input type="text" name="" class="form-control date" id="journal_date" style="margin: 0 auto;text-align: center;">
                </div>
            </div>
          </div>
        </div>
    </div>


    <div class="row row-cards mt-5">
      <div class="col-sm-6 col-lg-3">
        <div class="card card-sm">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col-auto">
                <span class="bg-blue text-white avatar"><!-- Download SVG icon from http://tabler-icons.io/i/currency-dollar -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-event" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                      <rect x="4" y="5" width="16" height="16" rx="2"/>
                      <line x1="16" y1="3" x2="16" y2="7"/>
                      <line x1="8" y1="3" x2="8" y2="7"/>
                      <line x1="4" y1="11" x2="20" y2="11"/>
                      <rect x="8" y="15" width="2" height="2"/>
                    </svg>
                </span>
              </div>
              <div class="col">
                <div class="font-weight-medium"> Date d'ouverture </div>
                <div class="text-muted" id="session_open_at"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-lg-3">
        <div class="card card-sm">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col-auto">
                <span class="bg-green text-white avatar"><!-- Download SVG icon from http://tabler-icons.io/i/shopping-cart -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M16.7 8a3 3 0 0 0 -2.7 -2h-4a3 3 0 0 0 0 6h4a3 3 0 0 1 0 6h-4a3 3 0 0 1 -2.7 -2"></path><path d="M12 3v3m0 12v3"></path></svg>
                </span>
              </div>
              <div class="col">
                <div class="font-weight-medium">Montant Initial</div>
                <div class="text-muted" id="session_caisse"> </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-lg-3">
        <div class="card card-sm">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col-auto">
                <span class="bg-twitter text-white avatar"><!-- Download SVG icon from http://tabler-icons.io/i/brand-twitter -->
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-cash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"> <path stroke="none" d="M0 0h24v24H0z" fill="none"/> <rect x="7" y="9" width="14" height="10" rx="2"/> <circle cx="14" cy="14" r="2"/> <path d="M17 9v-2a2 2 0 0 0 -2 -2h-10a2 2 0 0 0 -2 2v6a2 2 0 0 0 2 2h2"/> </svg> 
                </span>
              </div>
              <div class="col">
                <div class="font-weight-medium">Total des Commandes</div>
                <div class="text-muted" id="session_amount"> </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-lg-3">
        <div class="card card-sm">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col-auto">
                <span class="bg-facebook text-white avatar"><!-- Download SVG icon from http://tabler-icons.io/i/brand-facebook -->
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-businessplan" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"> <path stroke="none" d="M0 0h24v24H0z" fill="none"/> <ellipse cx="16" cy="6" rx="5" ry="3"/> <path d="M11 6v4c0 1.657 2.239 3 5 3s5 -1.343 5 -3v-4"/> <path d="M11 10v4c0 1.657 2.239 3 5 3s5 -1.343 5 -3v-4"/> <path d="M11 14v4c0 1.657 2.239 3 5 3s5 -1.343 5 -3v-4"/> <path d="M7 9h-2.5a1.5 1.5 0 0 0 0 3h1a1.5 1.5 0 0 1 0 3h-2.5"/> <path d="M5 15v1m0 -8v1"/> </svg>
                </span>
              </div>
              <div class="col">
                <div class="font-weight-medium">Total des encaissements</div>
                <div class="text-muted" id="session_payed"> </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

</div>



<script>

$(document).ready(async function(){

    $('#journal_date').change(async function(){

        await new Session().caisse({
            date: $(this).val()
        })
        .then(async function(data) {
            console.table(data)
            $('#session_open_at').text( dateTimeFomat( data.open_at ) );
            $('#session_caisse').text( tofixed2(data.caisse) + ' DH' );
            $('#session_amount').text( tofixed2(data.amount) + ' DH' );
            $('#session_payed').text( tofixed2(data.payed) + ' DH' );
        })
        .catch(function (err){ });
    }).trigger('change');

});
</script>